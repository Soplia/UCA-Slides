<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ConnectionPool (Apache Tomcat 8.5.35 API Documentation)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ConnectionPool (Apache Tomcat 8.5.35 API Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><b>Apache Tomcat 8.5.35</b></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/tomcat/jdbc/pool/ClassLoaderUtil.html" title="class in org.apache.tomcat.jdbc.pool"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.ConnectionFuture.html" title="class in org.apache.tomcat.jdbc.pool"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/tomcat/jdbc/pool/ConnectionPool.html" target="_top">Frames</a></li>
<li><a href="ConnectionPool.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.tomcat.jdbc.pool</div>
<h2 title="Class ConnectionPool" class="title">Class ConnectionPool</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.tomcat.jdbc.pool.ConnectionPool</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">ConnectionPool</span>
extends java.lang.Object</pre>
<div class="block">Implementation of simple connection pool.
 The ConnectionPool uses a <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html" title="class in org.apache.tomcat.jdbc.pool"><code>PoolProperties</code></a> object for storing all the meta information about the connection pool.
 As the underlying implementation, the connection pool uses <code>BlockingQueue</code> to store active and idle connections.
 A custom implementation of a fair <a href="../../../../../org/apache/tomcat/jdbc/pool/FairBlockingQueue.html" title="class in org.apache.tomcat.jdbc.pool"><code>FairBlockingQueue</code></a> blocking queue is provided with the connection pool itself.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>1.0</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.ConnectionFuture.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.ConnectionFuture</a></strong></code>
<div class="block">Tread safe wrapper around a future for the regular queue
 This one retrieves the pooled connection object
 and performs the initialization according to
 interceptors and validation rules.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.PoolCleaner.html" title="class in org.apache.tomcat.jdbc.pool">ConnectionPool.PoolCleaner</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.html" title="class in org.apache.tomcat.jdbc.pool.jmx">ConnectionPool</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#jmxPool">jmxPool</a></strong></code>
<div class="block">reference to the JMX mbean</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#POOL_JMX_DOMAIN">POOL_JMX_DOMAIN</a></strong></code>
<div class="block">Default domain for objects registering with an mbean server</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#POOL_JMX_TYPE_PREFIX">POOL_JMX_TYPE_PREFIX</a></strong></code>
<div class="block">Prefix type for JMX registration</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#ConnectionPool(org.apache.tomcat.jdbc.pool.PoolConfiguration)">ConnectionPool</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;prop)</code>
<div class="block">Instantiate a connection pool.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#abandon(org.apache.tomcat.jdbc.pool.PooledConnection)">abandon</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</code>
<div class="block">thread safe way to abandon a connection
 signals a connection to be abandoned.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#borrowConnection(long,%20org.apache.tomcat.jdbc.pool.PooledConnection,%20java.lang.String,%20java.lang.String)">borrowConnection</a></strong>(long&nbsp;now,
                <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con,
                java.lang.String&nbsp;username,
                java.lang.String&nbsp;password)</code>
<div class="block">Validates and configures a previously idle connection</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#checkAbandoned()">checkAbandoned</a></strong>()</code>
<div class="block">Iterates through all the busy connections and checks for connections that have timed out</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#checkIdle()">checkIdle</a></strong>()</code>
<div class="block">Iterates through the idle connections and resizes the idle pool based on parameters
 <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxIdle"><code>PoolProperties.maxIdle</code></a>, <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#minIdle"><code>PoolProperties.minIdle</code></a>, <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#minEvictableIdleTimeMillis"><code>PoolProperties.minEvictableIdleTimeMillis</code></a></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#checkIdle(boolean)">checkIdle</a></strong>(boolean&nbsp;ignoreMinSize)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#checkPoolConfiguration(org.apache.tomcat.jdbc.pool.PoolConfiguration)">checkPoolConfiguration</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;properties)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#close(boolean)">close</a></strong>(boolean&nbsp;force)</code>
<div class="block">Closes the pool and all disconnects all idle connections
 Active connections will be closed upon the <code>close</code> method is called
 on the underlying connection instead of being returned to the pool</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#create(boolean)">create</a></strong>(boolean&nbsp;incrementCounter)</code>
<div class="block">Create a new pooled connection object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#createConnection(long,%20org.apache.tomcat.jdbc.pool.PooledConnection,%20java.lang.String,%20java.lang.String)">createConnection</a></strong>(long&nbsp;now,
                <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;notUsed,
                java.lang.String&nbsp;username,
                java.lang.String&nbsp;password)</code>
<div class="block">Creates a JDBC connection and tries to connect to the database.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#createMBean()">createMBean</a></strong>()</code>
<div class="block">Create MBean object that can be registered.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#disconnectEvent(org.apache.tomcat.jdbc.pool.PooledConnection,%20boolean)">disconnectEvent</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con,
               boolean&nbsp;finalizing)</code>
<div class="block">Hook to perform final actions on a pooled connection object once it has been disconnected and will be discarded</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#finalize(org.apache.tomcat.jdbc.pool.PooledConnection)">finalize</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</code>
<div class="block">Hook to perform final actions on a pooled connection object once it has been disconnected and will be discarded</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getActive()">getActive</a></strong>()</code>
<div class="block">Returns the number of connections that are in use</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getBorrowedCount()">getBorrowedCount</a></strong>()</code>
<div class="block">The total number of connections borrowed from this pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.sql.Connection</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getConnection()">getConnection</a></strong>()</code>
<div class="block">Borrows a connection from the pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.sql.Connection</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getConnection(java.lang.String,%20java.lang.String)">getConnection</a></strong>(java.lang.String&nbsp;username,
             java.lang.String&nbsp;password)</code>
<div class="block">Borrows a connection from the pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.concurrent.Future&lt;java.sql.Connection&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getConnectionAsync()">getConnectionAsync</a></strong>()</code>
<div class="block">Retrieves a Connection future.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getCreatedCount()">getCreatedCount</a></strong>()</code>
<div class="block">The total number of connections created by this pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getIdle()">getIdle</a></strong>()</code>
<div class="block">Returns the number of idle connections</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.html" title="class in org.apache.tomcat.jdbc.pool.jmx">ConnectionPool</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getJmxPool()">getJmxPool</a></strong>()</code>
<div class="block">Return the object that is potentially registered in JMX for notifications</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getName()">getName</a></strong>()</code>
<div class="block">Returns the name of this pool</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Set&lt;java.util.TimerTask&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getPoolCleaners()">getPoolCleaners</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getPoolProperties()">getPoolProperties</a></strong>()</code>
<div class="block">Returns the pool properties associated with this connection pool</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Timer</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getPoolTimer()">getPoolTimer</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getPoolVersion()">getPoolVersion</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.reflect.Constructor&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getProxyConstructor(boolean)">getProxyConstructor</a></strong>(boolean&nbsp;xa)</code>
<div class="block">Creates and caches a <code>Constructor</code> used to instantiate the proxy object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getReconnectedCount()">getReconnectedCount</a></strong>()</code>
<div class="block">The total number of connections reconnected by this pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getReleasedCount()">getReleasedCount</a></strong>()</code>
<div class="block">The total number of connections released from this pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getReleasedIdleCount()">getReleasedIdleCount</a></strong>()</code>
<div class="block">The total number of connections released by eviction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getRemoveAbandonedCount()">getRemoveAbandonedCount</a></strong>()</code>
<div class="block">The total number of connections released by remove abandoned.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getReturnedCount()">getReturnedCount</a></strong>()</code>
<div class="block">The total number of connections returned to this pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getSize()">getSize</a></strong>()</code>
<div class="block">Returns the total size of this pool, this includes both busy and idle connections</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getStackTrace(java.lang.Throwable)">getStackTrace</a></strong>(java.lang.Throwable&nbsp;x)</code>
<div class="block">Convert an exception into a String</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getThreadDump()">getThreadDump</a></strong>()</code>
<div class="block">Creates a stack trace representing the existing thread's current state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#getWaitCount()">getWaitCount</a></strong>()</code>
<div class="block">Return the number of threads waiting for a connection</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#init(org.apache.tomcat.jdbc.pool.PoolConfiguration)">init</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;properties)</code>
<div class="block">Initialize the connection pool - called from the constructor</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#initializePoolCleaner(org.apache.tomcat.jdbc.pool.PoolConfiguration)">initializePoolCleaner</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;properties)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#isClosed()">isClosed</a></strong>()</code>
<div class="block">Returns true if <a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#close(boolean)"><code>close</code></a> has been called, and the connection pool is unusable</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#purge()">purge</a></strong>()</code>
<div class="block">Purges all connections in the pool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#purgeOnReturn()">purgeOnReturn</a></strong>()</code>
<div class="block">Purges connections when they are returned from the pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#release(org.apache.tomcat.jdbc.pool.PooledConnection)">release</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</code>
<div class="block">thread safe way to release a connection</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#resetStats()">resetStats</a></strong>()</code>
<div class="block">reset the statistics of this pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#returnConnection(org.apache.tomcat.jdbc.pool.PooledConnection)">returnConnection</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</code>
<div class="block">Returns a connection to the pool
 If the pool is closed, the connection will be released
 If the connection is not part of the busy queue, it will be released.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.sql.Connection</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#setupConnection(org.apache.tomcat.jdbc.pool.PooledConnection)">setupConnection</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</code>
<div class="block">configures a pooled connection as a proxy.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#shouldAbandon()">shouldAbandon</a></strong>()</code>
<div class="block">Determines if a connection should be abandoned based on
 <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#abandonWhenPercentageFull"><code>PoolProperties.abandonWhenPercentageFull</code></a> setting.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#shouldClose(org.apache.tomcat.jdbc.pool.PooledConnection,%20int)">shouldClose</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con,
           int&nbsp;action)</code>
<div class="block">Determines if a connection should be closed upon return to the pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#shouldReleaseIdle(long,%20org.apache.tomcat.jdbc.pool.PooledConnection,%20long)">shouldReleaseIdle</a></strong>(long&nbsp;now,
                 <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con,
                 long&nbsp;time)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#suspect(org.apache.tomcat.jdbc.pool.PooledConnection)">suspect</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</code>
<div class="block">Thread safe way to suspect a connection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#terminatePoolCleaner()">terminatePoolCleaner</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#terminateTransaction(org.apache.tomcat.jdbc.pool.PooledConnection)">terminateTransaction</a></strong>(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</code>
<div class="block">Terminate the current transaction for the given connection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#testAllIdle()">testAllIdle</a></strong>()</code>
<div class="block">Forces a validation of all idle connections if <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#testWhileIdle"><code>PoolProperties.testWhileIdle</code></a> is set.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="POOL_JMX_DOMAIN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>POOL_JMX_DOMAIN</h4>
<pre>public static final&nbsp;java.lang.String POOL_JMX_DOMAIN</pre>
<div class="block">Default domain for objects registering with an mbean server</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.tomcat.jdbc.pool.ConnectionPool.POOL_JMX_DOMAIN">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="POOL_JMX_TYPE_PREFIX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>POOL_JMX_TYPE_PREFIX</h4>
<pre>public static final&nbsp;java.lang.String POOL_JMX_TYPE_PREFIX</pre>
<div class="block">Prefix type for JMX registration</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.tomcat.jdbc.pool.ConnectionPool.POOL_JMX_TYPE_PREFIX">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="jmxPool">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>jmxPool</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.html" title="class in org.apache.tomcat.jdbc.pool.jmx">ConnectionPool</a> jmxPool</pre>
<div class="block">reference to the JMX mbean</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConnectionPool(org.apache.tomcat.jdbc.pool.PoolConfiguration)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConnectionPool</h4>
<pre>public&nbsp;ConnectionPool(<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;prop)
               throws java.sql.SQLException</pre>
<div class="block">Instantiate a connection pool. This will create connections if initialSize is larger than 0.
 The <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html" title="class in org.apache.tomcat.jdbc.pool"><code>PoolProperties</code></a> should not be reused for another connection pool.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>prop</code> - PoolProperties - all the properties for this connection pool</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - Pool initialization error</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getConnectionAsync()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnectionAsync</h4>
<pre>public&nbsp;java.util.concurrent.Future&lt;java.sql.Connection&gt;&nbsp;getConnectionAsync()
                                                                    throws java.sql.SQLException</pre>
<div class="block">Retrieves a Connection future. If a connection is not available, one can block using future.get()
 until a connection has become available.
 If a connection is not retrieved, the Future must be cancelled in order for the connection to be returned
 to the pool.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a Future containing a reference to the connection or the future connection</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - Cannot use asynchronous connect</dd></dl>
</li>
</ul>
<a name="getConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnection</h4>
<pre>public&nbsp;java.sql.Connection&nbsp;getConnection()
                                  throws java.sql.SQLException</pre>
<div class="block">Borrows a connection from the pool. If a connection is available (in the idle queue) or the pool has not reached
 <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxActive"><code>maxActive</code></a> connections a connection is returned immediately.
 If no connection is available, the pool will attempt to fetch a connection for <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxWait"><code>maxWait</code></a> milliseconds.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Connection - a java.sql.Connection/javax.sql.PooledConnection reflection proxy, wrapping the underlying object.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - - if the wait times out or a failure occurs creating a connection</dd></dl>
</li>
</ul>
<a name="getConnection(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnection</h4>
<pre>public&nbsp;java.sql.Connection&nbsp;getConnection(java.lang.String&nbsp;username,
                                java.lang.String&nbsp;password)
                                  throws java.sql.SQLException</pre>
<div class="block">Borrows a connection from the pool. If a connection is available (in the
 idle queue) or the pool has not reached <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxActive"><code>maxActive</code></a> connections a connection is returned immediately. If no
 connection is available, the pool will attempt to fetch a connection for
 <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxWait"><code>maxWait</code></a> milliseconds.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>username</code> - The user name to use for the connection</dd><dd><code>password</code> - The password for the connection</dd>
<dt><span class="strong">Returns:</span></dt><dd>Connection - a java.sql.Connection/javax.sql.PooledConnection
         reflection proxy, wrapping the underlying object.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - - if the wait times out or a failure occurs creating a
             connection</dd></dl>
</li>
</ul>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getName()</pre>
<div class="block">Returns the name of this pool</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String - the name of the pool</dd></dl>
</li>
</ul>
<a name="getWaitCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWaitCount</h4>
<pre>public&nbsp;int&nbsp;getWaitCount()</pre>
<div class="block">Return the number of threads waiting for a connection</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>number of threads waiting for a connection</dd></dl>
</li>
</ul>
<a name="getPoolProperties()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPoolProperties</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;getPoolProperties()</pre>
<div class="block">Returns the pool properties associated with this connection pool</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>PoolProperties</dd></dl>
</li>
</ul>
<a name="getSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre>public&nbsp;int&nbsp;getSize()</pre>
<div class="block">Returns the total size of this pool, this includes both busy and idle connections</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>int - number of established connections to the database</dd></dl>
</li>
</ul>
<a name="getActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActive</h4>
<pre>public&nbsp;int&nbsp;getActive()</pre>
<div class="block">Returns the number of connections that are in use</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>int - number of established connections that are being used by the application</dd></dl>
</li>
</ul>
<a name="getIdle()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIdle</h4>
<pre>public&nbsp;int&nbsp;getIdle()</pre>
<div class="block">Returns the number of idle connections</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>int - number of established connections not being used</dd></dl>
</li>
</ul>
<a name="isClosed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isClosed</h4>
<pre>public&nbsp;boolean&nbsp;isClosed()</pre>
<div class="block">Returns true if <a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#close(boolean)"><code>close</code></a> has been called, and the connection pool is unusable</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>boolean</dd></dl>
</li>
</ul>
<a name="setupConnection(org.apache.tomcat.jdbc.pool.PooledConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupConnection</h4>
<pre>protected&nbsp;java.sql.Connection&nbsp;setupConnection(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)
                                       throws java.sql.SQLException</pre>
<div class="block">configures a pooled connection as a proxy.
 This Proxy implements <code>Connection</code> and <code>PooledConnection</code> interfaces.
 All calls on <code>Connection</code> methods will be propagated down to the actual JDBC connection except for the
 <code>Connection.close()</code> method.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - a <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool"><code>PooledConnection</code></a> to wrap in a Proxy</dd>
<dt><span class="strong">Returns:</span></dt><dd>a <code>Connection</code> object wrapping a pooled connection.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an interceptor can't be configured, if the proxy can't be instantiated</dd></dl>
</li>
</ul>
<a name="getProxyConstructor(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProxyConstructor</h4>
<pre>public&nbsp;java.lang.reflect.Constructor&lt;?&gt;&nbsp;getProxyConstructor(boolean&nbsp;xa)
                                                     throws java.lang.NoSuchMethodException</pre>
<div class="block">Creates and caches a <code>Constructor</code> used to instantiate the proxy object.
 We cache this, since the creation of a constructor is fairly slow.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>xa</code> - Use a XA connection</dd>
<dt><span class="strong">Returns:</span></dt><dd>constructor used to instantiate the wrapper object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.NoSuchMethodException</code> - Failed to get a constructor</dd></dl>
</li>
</ul>
<a name="close(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>protected&nbsp;void&nbsp;close(boolean&nbsp;force)</pre>
<div class="block">Closes the pool and all disconnects all idle connections
 Active connections will be closed upon the <code>close</code> method is called
 on the underlying connection instead of being returned to the pool</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>force</code> - - true to even close the active connections</dd></dl>
</li>
</ul>
<a name="init(org.apache.tomcat.jdbc.pool.PoolConfiguration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>protected&nbsp;void&nbsp;init(<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;properties)
             throws java.sql.SQLException</pre>
<div class="block">Initialize the connection pool - called from the constructor</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>properties</code> - PoolProperties - properties used to initialize the pool with</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if initialization fails</dd></dl>
</li>
</ul>
<a name="checkPoolConfiguration(org.apache.tomcat.jdbc.pool.PoolConfiguration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkPoolConfiguration</h4>
<pre>public&nbsp;void&nbsp;checkPoolConfiguration(<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;properties)</pre>
</li>
</ul>
<a name="initializePoolCleaner(org.apache.tomcat.jdbc.pool.PoolConfiguration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializePoolCleaner</h4>
<pre>public&nbsp;void&nbsp;initializePoolCleaner(<a href="../../../../../org/apache/tomcat/jdbc/pool/PoolConfiguration.html" title="interface in org.apache.tomcat.jdbc.pool">PoolConfiguration</a>&nbsp;properties)</pre>
</li>
</ul>
<a name="terminatePoolCleaner()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>terminatePoolCleaner</h4>
<pre>public&nbsp;void&nbsp;terminatePoolCleaner()</pre>
</li>
</ul>
<a name="abandon(org.apache.tomcat.jdbc.pool.PooledConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abandon</h4>
<pre>protected&nbsp;void&nbsp;abandon(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</pre>
<div class="block">thread safe way to abandon a connection
 signals a connection to be abandoned.
 this will disconnect the connection, and log the stack trace if logAbandoned=true</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - PooledConnection</dd></dl>
</li>
</ul>
<a name="suspect(org.apache.tomcat.jdbc.pool.PooledConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>suspect</h4>
<pre>protected&nbsp;void&nbsp;suspect(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</pre>
<div class="block">Thread safe way to suspect a connection. Similar to
 <a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#abandon(org.apache.tomcat.jdbc.pool.PooledConnection)"><code>abandon(PooledConnection)</code></a>, but instead of actually abandoning
 the connection, this will log a warning and set the suspect flag on the
 <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool"><code>PooledConnection</code></a> if logAbandoned=true</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - PooledConnection</dd></dl>
</li>
</ul>
<a name="release(org.apache.tomcat.jdbc.pool.PooledConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>release</h4>
<pre>protected&nbsp;void&nbsp;release(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</pre>
<div class="block">thread safe way to release a connection</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - PooledConnection</dd></dl>
</li>
</ul>
<a name="createConnection(long, org.apache.tomcat.jdbc.pool.PooledConnection, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createConnection</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;createConnection(long&nbsp;now,
                                <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;notUsed,
                                java.lang.String&nbsp;username,
                                java.lang.String&nbsp;password)
                                     throws java.sql.SQLException</pre>
<div class="block">Creates a JDBC connection and tries to connect to the database.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>now</code> - timestamp of when this was called</dd><dd><code>notUsed</code> - Argument not used</dd><dd><code>username</code> - The user name to use for the connection</dd><dd><code>password</code> - The password for the connection</dd>
<dt><span class="strong">Returns:</span></dt><dd>a PooledConnection that has been connected</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - Failed to get a connection</dd></dl>
</li>
</ul>
<a name="borrowConnection(long, org.apache.tomcat.jdbc.pool.PooledConnection, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>borrowConnection</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;borrowConnection(long&nbsp;now,
                                <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con,
                                java.lang.String&nbsp;username,
                                java.lang.String&nbsp;password)
                                     throws java.sql.SQLException</pre>
<div class="block">Validates and configures a previously idle connection</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>now</code> - - timestamp</dd><dd><code>con</code> - - the connection to validate and configure</dd><dd><code>username</code> - The user name to use for the connection</dd><dd><code>password</code> - The password for the connection</dd>
<dt><span class="strong">Returns:</span></dt><dd>a connection</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if a validation error happens</dd></dl>
</li>
</ul>
<a name="terminateTransaction(org.apache.tomcat.jdbc.pool.PooledConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>terminateTransaction</h4>
<pre>protected&nbsp;boolean&nbsp;terminateTransaction(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</pre>
<div class="block">Terminate the current transaction for the given connection.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - The connection</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the connection TX termination succeeded
         otherwise <code>false</code></dd></dl>
</li>
</ul>
<a name="shouldClose(org.apache.tomcat.jdbc.pool.PooledConnection, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldClose</h4>
<pre>protected&nbsp;boolean&nbsp;shouldClose(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con,
                  int&nbsp;action)</pre>
<div class="block">Determines if a connection should be closed upon return to the pool.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - - the connection</dd><dd><code>action</code> - - the validation action that should be performed</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the connection should be closed</dd></dl>
</li>
</ul>
<a name="returnConnection(org.apache.tomcat.jdbc.pool.PooledConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>returnConnection</h4>
<pre>protected&nbsp;void&nbsp;returnConnection(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</pre>
<div class="block">Returns a connection to the pool
 If the pool is closed, the connection will be released
 If the connection is not part of the busy queue, it will be released.
 If <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#testOnReturn"><code>PoolProperties.testOnReturn</code></a> is set to true it will be validated</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - PooledConnection to be returned to the pool</dd></dl>
</li>
</ul>
<a name="shouldAbandon()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldAbandon</h4>
<pre>protected&nbsp;boolean&nbsp;shouldAbandon()</pre>
<div class="block">Determines if a connection should be abandoned based on
 <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#abandonWhenPercentageFull"><code>PoolProperties.abandonWhenPercentageFull</code></a> setting.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the connection should be abandoned</dd></dl>
</li>
</ul>
<a name="checkAbandoned()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAbandoned</h4>
<pre>public&nbsp;void&nbsp;checkAbandoned()</pre>
<div class="block">Iterates through all the busy connections and checks for connections that have timed out</div>
</li>
</ul>
<a name="checkIdle()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIdle</h4>
<pre>public&nbsp;void&nbsp;checkIdle()</pre>
<div class="block">Iterates through the idle connections and resizes the idle pool based on parameters
 <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#maxIdle"><code>PoolProperties.maxIdle</code></a>, <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#minIdle"><code>PoolProperties.minIdle</code></a>, <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#minEvictableIdleTimeMillis"><code>PoolProperties.minEvictableIdleTimeMillis</code></a></div>
</li>
</ul>
<a name="checkIdle(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIdle</h4>
<pre>public&nbsp;void&nbsp;checkIdle(boolean&nbsp;ignoreMinSize)</pre>
</li>
</ul>
<a name="shouldReleaseIdle(long, org.apache.tomcat.jdbc.pool.PooledConnection, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldReleaseIdle</h4>
<pre>protected&nbsp;boolean&nbsp;shouldReleaseIdle(long&nbsp;now,
                        <a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con,
                        long&nbsp;time)</pre>
</li>
</ul>
<a name="testAllIdle()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>testAllIdle</h4>
<pre>public&nbsp;void&nbsp;testAllIdle()</pre>
<div class="block">Forces a validation of all idle connections if <a href="../../../../../org/apache/tomcat/jdbc/pool/PoolProperties.html#testWhileIdle"><code>PoolProperties.testWhileIdle</code></a> is set.</div>
</li>
</ul>
<a name="getThreadDump()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getThreadDump</h4>
<pre>protected static&nbsp;java.lang.String&nbsp;getThreadDump()</pre>
<div class="block">Creates a stack trace representing the existing thread's current state.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a string object representing the current state.
 TODO investigate if we simply should store <code>Thread.getStackTrace()</code> elements</dd></dl>
</li>
</ul>
<a name="getStackTrace(java.lang.Throwable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStackTrace</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getStackTrace(java.lang.Throwable&nbsp;x)</pre>
<div class="block">Convert an exception into a String</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>x</code> - - the throwable</dd>
<dt><span class="strong">Returns:</span></dt><dd>a string representing the stack trace</dd></dl>
</li>
</ul>
<a name="create(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;create(boolean&nbsp;incrementCounter)</pre>
<div class="block">Create a new pooled connection object. Not connected nor validated.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>incrementCounter</code> - <code>true</code> to increment the connection count</dd>
<dt><span class="strong">Returns:</span></dt><dd>a pooled connection object</dd></dl>
</li>
</ul>
<a name="purge()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purge</h4>
<pre>public&nbsp;void&nbsp;purge()</pre>
<div class="block">Purges all connections in the pool.
 For connections currently in use, these connections will be
 purged when returned on the pool. This call also
 purges connections that are idle and in the pool
 To only purge used/active connections see <a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#purgeOnReturn()"><code>purgeOnReturn()</code></a></div>
</li>
</ul>
<a name="purgeOnReturn()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeOnReturn</h4>
<pre>public&nbsp;void&nbsp;purgeOnReturn()</pre>
<div class="block">Purges connections when they are returned from the pool.
 This call does not purge idle connections until they are used.
 To purge idle connections see <a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.html#purge()"><code>purge()</code></a></div>
</li>
</ul>
<a name="finalize(org.apache.tomcat.jdbc.pool.PooledConnection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con)</pre>
<div class="block">Hook to perform final actions on a pooled connection object once it has been disconnected and will be discarded</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - The connection</dd></dl>
</li>
</ul>
<a name="disconnectEvent(org.apache.tomcat.jdbc.pool.PooledConnection, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnectEvent</h4>
<pre>protected&nbsp;void&nbsp;disconnectEvent(<a href="../../../../../org/apache/tomcat/jdbc/pool/PooledConnection.html" title="class in org.apache.tomcat.jdbc.pool">PooledConnection</a>&nbsp;con,
                   boolean&nbsp;finalizing)</pre>
<div class="block">Hook to perform final actions on a pooled connection object once it has been disconnected and will be discarded</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - The connection</dd><dd><code>finalizing</code> - <code>true</code> if finalizing the connection</dd></dl>
</li>
</ul>
<a name="getJmxPool()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJmxPool</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPool.html" title="class in org.apache.tomcat.jdbc.pool.jmx">ConnectionPool</a>&nbsp;getJmxPool()</pre>
<div class="block">Return the object that is potentially registered in JMX for notifications</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the object implementing the <a href="../../../../../org/apache/tomcat/jdbc/pool/jmx/ConnectionPoolMBean.html" title="interface in org.apache.tomcat.jdbc.pool.jmx"><code>ConnectionPoolMBean</code></a> interface</dd></dl>
</li>
</ul>
<a name="createMBean()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createMBean</h4>
<pre>protected&nbsp;void&nbsp;createMBean()</pre>
<div class="block">Create MBean object that can be registered.</div>
</li>
</ul>
<a name="getBorrowedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBorrowedCount</h4>
<pre>public&nbsp;long&nbsp;getBorrowedCount()</pre>
<div class="block">The total number of connections borrowed from this pool.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the borrowed connection count</dd></dl>
</li>
</ul>
<a name="getReturnedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReturnedCount</h4>
<pre>public&nbsp;long&nbsp;getReturnedCount()</pre>
<div class="block">The total number of connections returned to this pool.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the returned connection count</dd></dl>
</li>
</ul>
<a name="getCreatedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCreatedCount</h4>
<pre>public&nbsp;long&nbsp;getCreatedCount()</pre>
<div class="block">The total number of connections created by this pool.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the created connection count</dd></dl>
</li>
</ul>
<a name="getReleasedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReleasedCount</h4>
<pre>public&nbsp;long&nbsp;getReleasedCount()</pre>
<div class="block">The total number of connections released from this pool.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the released connection count</dd></dl>
</li>
</ul>
<a name="getReconnectedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReconnectedCount</h4>
<pre>public&nbsp;long&nbsp;getReconnectedCount()</pre>
<div class="block">The total number of connections reconnected by this pool.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the reconnected connection count</dd></dl>
</li>
</ul>
<a name="getRemoveAbandonedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemoveAbandonedCount</h4>
<pre>public&nbsp;long&nbsp;getRemoveAbandonedCount()</pre>
<div class="block">The total number of connections released by remove abandoned.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the PoolCleaner removed abandoned connection count</dd></dl>
</li>
</ul>
<a name="getReleasedIdleCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReleasedIdleCount</h4>
<pre>public&nbsp;long&nbsp;getReleasedIdleCount()</pre>
<div class="block">The total number of connections released by eviction.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the PoolCleaner evicted idle connection count</dd></dl>
</li>
</ul>
<a name="resetStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetStats</h4>
<pre>public&nbsp;void&nbsp;resetStats()</pre>
<div class="block">reset the statistics of this pool.</div>
</li>
</ul>
<a name="getPoolCleaners()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPoolCleaners</h4>
<pre>public static&nbsp;java.util.Set&lt;java.util.TimerTask&gt;&nbsp;getPoolCleaners()</pre>
</li>
</ul>
<a name="getPoolVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPoolVersion</h4>
<pre>public&nbsp;long&nbsp;getPoolVersion()</pre>
</li>
</ul>
<a name="getPoolTimer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getPoolTimer</h4>
<pre>public static&nbsp;java.util.Timer&nbsp;getPoolTimer()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><b>Apache Tomcat 8.5.35</b></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/tomcat/jdbc/pool/ClassLoaderUtil.html" title="class in org.apache.tomcat.jdbc.pool"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/tomcat/jdbc/pool/ConnectionPool.ConnectionFuture.html" title="class in org.apache.tomcat.jdbc.pool"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/tomcat/jdbc/pool/ConnectionPool.html" target="_top">Frames</a></li>
<li><a href="ConnectionPool.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2000-2018 Apache Software Foundation. All Rights Reserved.</small></p>
</body>
</html>
